{% extends "layout.html" %}

{% block title %}
    loan book
{% endblock %}

{% set actionUrl = '/loan' %}

{% block pageTitle %}
    {% if reader_name %}
        Welcome {{ reader_name }}
    {% else %}
        loan book
    {% endif %}
{% endblock %}

{% block formContent %}
    <div class="flex items-center">
        <label for="reader_id" class="w-40 font-medium">Reader ID:</label>
        <input
            type="number"
            name="reader_id"
            id="reader_id"
            placeholder="Enter reader ID"
            class="ml-2 p-1 border border-gray-300 rounded w-64"
            required
        >
    </div>

        <button
            type="submit"
            class="mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-500/80 active:bg-blue-500/60 duration-100 text-white rounded cursor-pointer"
        >
            Enter
        </button>
    {% else %}
        <div class="flex items-center">
            <label for="ISBN" class="w-40 font-medium">ISBN:</label>
            <input
                type="text"
                name="ISBN"
                id="ISBN"
                placeholder="Enter ISBN"
                class="ml-2 p-1 border border-gray-300 rounded w-64"
                required
            >
        </div>

        <button
            type="submit"
            class="mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-500/80 active:bg-blue-500/60 duration-100 text-white rounded cursor-pointer"
        >
            Search
        </button>
    {% endif %}
{% endblock %}

{% block main %}

    {% if LoginFail %}
        <span class="text-red-400">{{ LoginFail }}</span>
    {% endif %}

    {% if NullFind %}
        <span class="text-red-400">{{ NullFind }}</span>
    {% endif %}

    {% if NoFind %}
        <span class="text-red-400">{{ NoFind }}</span>
    {% endif %}

    <hr class="my-4">

    {% if reader_name %}
        
        {% if datail %}
            <table class="table-auto w-[85] border-collapse border border-gray-300 mt-4">
                <thead class="bg-zinc-600 text-white">
                    <tr>
                        <th class="border border-gray-300 px-4 py-2 text-center">Book ID</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">ISBN</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Book Title</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Author</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Category</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Publisher</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Location District</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Book Shelf</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Shelf Level</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Loan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for datail in datail %}
                    <tr class="{% if loop.index0 % 2 == 0 %}bg-white{% else %}bg-gray-100{% endif %}">
                        <td class="border border-gray-300 px-4 py-2">{{ datail[0] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[1] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[2] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[3] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[4] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[5] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[6] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[7] }}</td>
                        <td class="border border-gray-300 px-4 py-2">{{ datail[8] }}</td>
                        <td class="border border-gray-300 px-4 py-2 text-center">
                            <form action="/loan" method="POST">
                                <input type="hidden" name="Loan" value="true">

                                <button
                                type="submit"
                                class="inline-flex items-center justify-center w-6 h-6 rounded-full border border-green-500 text-green-500 hover:cursor-pointer hover:bg-green-500 hover:text-white active:bg-green-500/60 duration-100"
                                title="loan this book"
                                >
                                <span class="block w-3 h-0.5 bg-current rounded"></span>
                                </button>
                            </form>
                        </td>
                    </tr>

                    {% endfor %}
                    </tbody>
                </table>

        {% else %}
            <p class="text-lg">There's no loan book from the reader</p>
        {% endif %}
    {% endif %}
    
{% endblock %}
